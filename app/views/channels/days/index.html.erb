<% year_month_str = '%d-%02d' % [@year, @month] %>
<% title([@channel.name_with_prefix, year_month_str]) %>
<%= render('shared/navbar') %>
<div class="container main-container">
  <div class="row">
    <div class="col-xs-12">
      <div class="main-panel">
        <div class="panel-body">
          <%= render('shared/flash') %>

          <ol class="breadcrumb">
            <li><%= link_to('チャンネル', channels_path) %></li>
            <li><%= link_to(@channel.name_with_prefix, @channel) %></li>
            <li><%= link_to("#{@year}年", @browse_year.path) %></li>
            <li class="active"><%= @month %>月</li>
          </ol>

          <div class="page-header">
            <h1><%= @channel.name_with_prefix %> <%= year_month_str %></h1>
          </div>

          <ul>
            <% @dates.each do |date| %>
              <% browse_day = ChannelBrowse::Day.new(channel: @channel, date: date) %>
              <li><%= link_to(date.strftime('%F'), browse_day.path) %>（<%= @speech_count[date] || 0 %> 発言）</li>
            <% end %>
          </ul>

          <% if @browse_prev_month || @browse_next_month %>
            <div class="row">
              <div class="col-xs-6">
                <% if @browse_prev_month %>
                  <p><%= link_to(fa_icon('chevron-left', text: '前の月'), @browse_prev_month.path, class: 'btn btn-primary btn-sm') %></p>
                <% end %>
              </div>

              <div class="col-xs-6">
                <% if @browse_next_month %>
                  <p class="text-right"><%= link_to(raw("次の月 #{fa_icon('chevron-right')}"), @browse_next_month.path, class: 'btn btn-primary btn-sm') %></p>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
